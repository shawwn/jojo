#+property: tangle jojo.cpp
#+title: jojo

* [todo-stack]

*** spec the imp

    - rm rust version

*** form a coding style

*** simplify den to obj

* [note]

*** [for now] use string instead of symbol

    - to simplify the implementation
      we use string instead of symbol
      and we keep the implementation easy to change
      and add symbol back only later

* prolog

*** include

    #+begin_src cpp
    #include <iostream>
    #include <vector>
    #include <map>
    #include <set>
    #include <stack>
    #+end_src

*** using

    #+begin_src cpp
    using namespace std;
    #+end_src

* name

*** name_t

    #+begin_src cpp
    using name_t = string;
    #+end_src

* env

*** env_s

    #+begin_src cpp
    struct obj_s;
    struct frame_s;

    struct env_s
    {
        map<name_t, obj_s> name_map;
        stack<obj_s> obj_stack;
        stack<frame_s> frame_stack;
        void step ();
        void eval ();
    };
    #+end_src

*** body_t

    #+begin_src cpp
    struct ins_s;

    using body_t = vector<ins_s>;
    #+end_src

*** frame_s

    #+begin_src cpp
    struct frame_s
    {
       size_t index;
       body_t body;
       map<name_t, obj_s> local_map;
    };
    #+end_src

*** step

*** eval

* obj

*** obj_s

    #+begin_src cpp
    struct obj_s
    {

    };
    #+end_src

*** >< clo_obj_s

    #+begin_src cpp
    struct clo_obj_s: public obj_s
    {

    };
    #+end_src

*** >< int_obj_s

    #+begin_src cpp
    struct int_obj_s: public obj_s
    {

    };
    #+end_src

*** >< str_obj_s

    #+begin_src cpp
    struct str_obj_s: public obj_s
    {

    };
    #+end_src

* ins

*** ins_s

    #+begin_src cpp
    struct ins_s
    {

    };
    #+end_src

*** >< call_ins_s

    #+begin_src cpp
    struct call_ins_s: public ins_s
    {

    };
    #+end_src

*** >< end_ins_s

    #+begin_src cpp
    struct end_ins_s: public ins_s
    {

    };
    #+end_src

*** >< get_ins_s

    #+begin_src cpp
    struct get_ins_s: public ins_s
    {

    };
    #+end_src

*** >< let_ins_s

    #+begin_src cpp
    struct let_ins_s: public ins_s
    {

    };
    #+end_src

*** >< clo_ins_s

    #+begin_src cpp
    struct clo_ins_s: public ins_s
    {

    };
    #+end_src

* epilog

*** main

    #+begin_src cpp
    int main ()
    {

    }
    #+end_src
